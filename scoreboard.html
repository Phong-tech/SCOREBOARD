#!/bin/bash

SCOREBOARD_FILE="/tmp/scoreboard.txt"

# Check if the scoreboard file exists
if [ ! -f "$SCOREBOARD_FILE" ]; then
    echo "Content-type: text/html"
    echo ""
    echo "<p>Error: Scoreboard file not found at $SCOREBOARD_FILE</p>"
    exit 1
fi

# Read and format rows from the scoreboard file
SCOREBOARD_ROWS=$(awk -F',' '{
    printf "<tr><td>%s</td><td>%s</td><td>%s °C</td><td>%s °C</td><td>%s</td></tr>\n", $1, $2, $3, $4, $5
}' "$SCOREBOARD_FILE")

# Replace {{SCOREBOARD_DATA}} in the HTML
cat index.html | sed "s/{{SCOREBOARD_DATA}}/$SCOREBOARD_ROWS/"
